# Nixpacks config (Railway)
# Fixes common Strapi admin build failures where SWC native bindings are missing
# due to optional dependencies being omitted or the wrong Node version being used.

[variables]
NIXPACKS_NODE_VERSION = "20"
NPM_CONFIG_OPTIONAL = "true"

[phases.install]
cmds = [
  "npm install --include=optional"
]

[phases.build]
cmds = [
  "npm run build"
]

[start]
cmd = "npm start"
